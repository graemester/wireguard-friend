# wg-friend Configuration
# WireGuard Peer Manager for mesh VPN networks

# Data storage
data_dir: ~/.wg-friend
metadata_db: ~/.wg-friend/peers.db

# SSH Configuration
ssh:
  key_path: ~/.ssh/id_ed25519
  timeout: 10

# Coordinator Server (Public VPS)
# - Has public IP and endpoint
# - Central hub for all peers
# - Usually runs on VPS with static IP
coordinator:
  name: oh.higrae.me
  host: oh.higrae.me
  port: 2223
  user: ged
  config_path: /etc/wireguard/wg0.conf
  interface: wg0
  endpoint: oh.higrae.me:51820
  public_key: Yk+VD886XMnyu2EUGWFoLKXJAwkN7wtCauQzq32KUC8=
  network:
    ipv4: 10.66.0.0/24
    ipv6: fd66:6666::/64
  coordinator_ip:
    ipv4: 10.66.0.1
    ipv6: fd66:6666::1

# Subnet Router (Internal LAN Gateway)
# - Behind NAT on private network
# - Routes LAN traffic to VPN peers
# - Provides access to home network resources
subnet_router:
  name: icculus
  host: 192.168.12.20  # Internal IP
  user: ged
  config_path: /etc/wireguard/wg0.conf
  interface: wg0
  vpn_ip:
    ipv4: 10.66.0.20
    ipv6: fd66:6666::20
  routed_subnets:
    - 192.168.12.0/24  # Home LAN
  dns: 192.168.12.20   # Pi-hole on subnet router

# Peer Templates
# These define standard configurations for different peer types
peer_templates:
  # Mobile/Desktop Client (Full Access)
  # - Connects to coordinator
  # - Can access VPN mesh AND home LAN
  # - Most common peer type
  mobile_client:
    description: "Mobile/desktop device with full network access"
    persistent_keepalive: 25
    dns: 192.168.12.20
    allowed_ips:
      - 10.66.0.0/24        # VPN mesh
      - fd66:6666::/64      # VPN mesh (IPv6)
      - 192.168.12.0/24     # Home LAN
    mtu: 1280

  # VPN-Only Client (Mesh Access Only)
  # - Can only reach other VPN peers
  # - No access to home LAN
  # - Use for less trusted devices
  mesh_only:
    description: "VPN mesh access only, no LAN"
    persistent_keepalive: 25
    dns: 10.66.0.1
    allowed_ips:
      - 10.66.0.0/24
      - fd66:6666::/64
    mtu: 1280

  # Restricted External Peer (Limited Access)
  # - Specific AllowedIPs only
  # - Use for external collaborators
  # - Example: access to specific server only
  restricted_external:
    description: "Restricted access to specific resources"
    persistent_keepalive: 25
    dns: 10.66.0.1
    allowed_ips:
      # Define specific IPs/subnets in peer creation
      - 10.66.0.0/24
    mtu: 1280

  # Server/Service Peer (Static Infrastructure)
  # - Another server in the mesh
  # - No PersistentKeepalive needed
  # - Use for always-on services
  server_peer:
    description: "Server or service peer"
    persistent_keepalive: 0  # Not needed for servers
    allowed_ips:
      - 10.66.0.0/24
      - fd66:6666::/64
      - 192.168.12.0/24
    mtu: 1280

# IP Allocation
# wg-friend auto-assigns IPs from these ranges
ip_allocation:
  start_ipv4: 10.66.0.50
  end_ipv4: 10.66.0.254
  start_ipv6: fd66:6666::50
  # Reserved IPs
  reserved:
    - 10.66.0.1   # Coordinator
    - 10.66.0.20  # icculus (subnet router)

# QR Code Settings
qr_code:
  enabled: true
  output_dir: ~/.wg-friend/qr-codes
  save_png: true

# Logging
logging:
  level: INFO
  file: ~/.wg-friend/wg-friend.log
